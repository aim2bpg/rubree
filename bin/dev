#!/usr/bin/env ruby

# Check if foreman is installed
unless system("gem list --no-installed --exact --silent foreman")
  puts "Installing foreman..."
  system("gem install foreman") || abort("Failed to install foreman")
end

# Default to port 3000 if not specified
ENV["PORT"] ||= "3000"

# Start foreman with Procfile.dev
exec "foreman", "start", "-f", "Procfile.dev", "--env", "/dev/null", *ARGV
